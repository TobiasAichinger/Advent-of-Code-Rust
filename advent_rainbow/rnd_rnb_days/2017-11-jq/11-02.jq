split(",") | 

[
    foreach {"n": [2,0], "ne":[1,1], "nw":[1,-1], "s":[-2,0], "se":[-1,1], "sw":[-1,-1]}[.[]] as $m (
        [0,0]; 
        .[0] += $m[0] | 
        .[1] += $m[1]
    )
]

| map(abs)
| max_by((.[0] + .[1]) / 2) as [$px, $py]
| ($px + $py) / 2
